{"version":3,"file":"static/js/3030.a4704f12.chunk.js","mappings":"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","sources":["shared/components/unitConverter/helpers.ts","shared/components/unitConverter/hooks.ts","shared/images/delete.svg","shared/images/swap.svg","shared/components/unitConverter/index.tsx","shared/components/unitConverter/types.ts","shared/helpers/number.ts","shared/helpers/pageCache.ts","shared/helpers/webStorage.ts","webpack://eazy.tools-dev/./src/shared/components/unitConverter/styles.scss?7fec"],"sourcesContent":["import {\r\n  T_ConversionRates,\r\n  T_FavoriteCodes,\r\n  T_FavoritesWithValue\r\n} from \"shared/components/unitConverter/types\";\r\nimport { round, toNumber } from \"shared/helpers/number\";\r\nimport { T_StringOrNumber } from \"shared/types/common\";\r\nimport { T_ConversionFormulas } from \"shared/types/unitConverter\";\r\n\r\nexport function sanitizeNumericInput(value: string) {\r\n  return (\r\n    value\r\n      // allow only numbers (with/without decimal values)\r\n      .replace(/[^0-9.]/g, \"\")\r\n      // allow only one decimal\r\n      .replace(/(\\..*?)\\..*/g, \"$1\")\r\n      // add a leading zero if the input is just a decimal point\r\n      // this will help 'toNumber' method to cast \"0.\" to 0\r\n      .replace(/^(\\.)$/, \"0.\")\r\n      // allow leading zero only for decimal values\r\n      .replace(/^0(\\d)/, \"$1\")\r\n  );\r\n}\r\n\r\nexport function getDefaultFavorites(\r\n  favoriteCodes: T_FavoriteCodes\r\n): T_FavoritesWithValue {\r\n  return favoriteCodes.map((code) => ({ code, value: \"\" }));\r\n}\r\n\r\nexport function calcValueForFavorites({\r\n  favorites,\r\n  conversionRates,\r\n  conversionFormulas,\r\n  inputCode,\r\n  inputValue\r\n}: T_CalcValueForFavoritesFnParams): T_FavoritesWithValue {\r\n  return favorites.map((favItem) => ({\r\n    ...favItem,\r\n    value: calcValue({\r\n      conversionRates,\r\n      conversionFormulas,\r\n      inputCode,\r\n      targetCode: favItem.code,\r\n      inputValue\r\n    })\r\n  }));\r\n}\r\n\r\nexport function calcValue({\r\n  conversionRates,\r\n  conversionFormulas,\r\n  inputCode,\r\n  targetCode,\r\n  inputValue\r\n}: T_CalcValueFnParams): T_StringOrNumber {\r\n  if (conversionFormulas) {\r\n    return calcValueBasedOnFormula({\r\n      conversionFormulas,\r\n      inputCode,\r\n      targetCode,\r\n      inputValue\r\n    });\r\n  } else if (conversionRates) {\r\n    return calcValueBasedOnRatio({\r\n      conversionRates,\r\n      inputCode,\r\n      targetCode,\r\n      inputValue\r\n    });\r\n  } else {\r\n    return inputValue;\r\n  }\r\n}\r\n\r\n/**\r\n * Assume:\r\n *    base code (of master data): BBB\r\n *    input code: CCC\r\n *    input value: x\r\n *    target code: YYY\r\n *\r\n * and we know (from master data):\r\n *    1 BBB = n1 CCC\r\n *    1 BBB = n2 YYY\r\n *\r\n * then,\r\n *               1 CCC  =  (1 / n1) BBB\r\n *               x CCC  =  x * (1 / n1) BBB\r\n *    x * (1 / n1) BBB  =  n2 * x * (1 / n1) YYY\r\n *               x CCC  =  n2 * x * / n1 YYY\r\n */\r\nfunction calcValueBasedOnRatio({\r\n  conversionRates,\r\n  inputCode,\r\n  targetCode,\r\n  inputValue\r\n}: { conversionRates: T_ConversionRates } & T_CalcValueFnParams) {\r\n  const x = toNumber(inputValue);\r\n  const n1 = conversionRates[inputCode];\r\n  const n2 = conversionRates[targetCode];\r\n\r\n  return round((n2 * x) / n1);\r\n}\r\n\r\nfunction calcValueBasedOnFormula({\r\n  conversionFormulas,\r\n  inputCode,\r\n  targetCode,\r\n  inputValue\r\n}: { conversionFormulas: T_ConversionFormulas } & T_CalcValueFnParams) {\r\n  let targetValue: T_StringOrNumber = 0;\r\n\r\n  if (inputCode === conversionFormulas.baseUnitCode) {\r\n    return conversionFormulas.fromBaseTo[targetCode](inputValue);\r\n  }\r\n\r\n  targetValue = conversionFormulas.toBaseFrom[inputCode](inputValue);\r\n\r\n  if (targetCode === conversionFormulas.baseUnitCode) {\r\n    return targetValue;\r\n  } else {\r\n    return conversionFormulas.fromBaseTo[targetCode](targetValue);\r\n  }\r\n}\r\n\r\ntype T_CalcValueForFavoritesFnParams = Omit<\r\n  T_CalcValueFnParams,\r\n  \"targetCode\"\r\n> & {\r\n  favorites: T_FavoritesWithValue;\r\n};\r\n\r\ntype T_CalcValueFnParams = {\r\n  inputCode: string;\r\n  targetCode: string;\r\n  inputValue: T_StringOrNumber;\r\n  conversionRates?: T_ConversionRates;\r\n  conversionFormulas?: T_ConversionFormulas;\r\n};\r\n","import React, { useMemo, useRef } from \"react\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport PageCache from \"shared/helpers/pageCache\";\r\nimport {\r\n  sanitizeNumericInput,\r\n  getDefaultFavorites,\r\n  calcValue,\r\n  calcValueForFavorites\r\n} from \"./helpers\";\r\nimport {\r\n  E_PageCacheKeys,\r\n  E_UnitConverterActions,\r\n  E_UnitConverterListItemActions,\r\n  T_FavoriteCodes,\r\n  T_UnitConverterAction,\r\n  T_UnitConverterConversionLogicProps,\r\n  T_UnitConverterPropsDefaults,\r\n  T_UnitConverterState\r\n} from \"./types\";\r\n\r\nexport function useElementHandlers(\r\n  dispatch: React.Dispatch<T_UnitConverterAction>,\r\n  pageCache: PageCache\r\n) {\r\n  const inputValueEl = useRef<HTMLInputElement>(null);\r\n  const targetValueEl = useRef<HTMLInputElement>(null);\r\n\r\n  const eventHandlers = useMemo(() => {\r\n    const handleInputValueChange = (\r\n      event: React.ChangeEvent<HTMLInputElement>\r\n    ) => dispatch([E_UnitConverterActions.setInputValue, event.target.value]);\r\n    const handleTargetValueChange = (\r\n      event: React.ChangeEvent<HTMLInputElement>\r\n    ) => dispatch([E_UnitConverterActions.setTargetValue, event.target.value]);\r\n    const handleListItemAction = (\r\n      event: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n    ) => {\r\n      const { code, actionName } = event.currentTarget.dataset;\r\n      if (code && actionName) {\r\n        switch (actionName as unknown as E_UnitConverterListItemActions) {\r\n          case E_UnitConverterListItemActions.input: {\r\n            pageCache.set(E_PageCacheKeys.inputCode, code);\r\n            dispatch([E_UnitConverterActions.setInputCode, code]);\r\n            inputValueEl.current?.focus();\r\n            return;\r\n          }\r\n          case E_UnitConverterListItemActions.target: {\r\n            pageCache.set(E_PageCacheKeys.targetCode, code);\r\n            dispatch([E_UnitConverterActions.setTargetCode, code]);\r\n            targetValueEl.current?.focus();\r\n            return;\r\n          }\r\n          default:\r\n            return;\r\n        }\r\n      }\r\n    };\r\n    const handleInputTargetCodeSwapClick = (\r\n      inputCode: string,\r\n      targetCode: string\r\n    ) => {\r\n      pageCache.set(E_PageCacheKeys.inputCode, targetCode);\r\n      pageCache.set(E_PageCacheKeys.targetCode, inputCode);\r\n      dispatch([E_UnitConverterActions.swapInputTargetCode]);\r\n      inputValueEl.current?.focus();\r\n    };\r\n    const handleInputClearClick = () => {\r\n      dispatch([E_UnitConverterActions.setInputValue, \"\"]);\r\n      inputValueEl.current?.focus();\r\n    };\r\n    const handleTargetClearClick = () => {\r\n      dispatch([E_UnitConverterActions.setTargetValue, \"\"]);\r\n      targetValueEl.current?.focus();\r\n    };\r\n\r\n    return {\r\n      handleInputValueChange,\r\n      handleTargetValueChange,\r\n      handleListItemAction,\r\n      handleInputClearClick,\r\n      handleTargetClearClick,\r\n      handleInputTargetCodeSwapClick\r\n    };\r\n  }, [dispatch, pageCache]);\r\n\r\n  return {\r\n    inputValueEl,\r\n    targetValueEl,\r\n    ...eventHandlers\r\n  };\r\n}\r\n\r\nexport function useDefaults(defaults: T_UnitConverterPropsDefaults) {\r\n  const location = useLocation();\r\n\r\n  return useMemo(() => {\r\n    const pageCache = new PageCache(location.pathname);\r\n    return {\r\n      inputCode:\r\n        pageCache.get<string>(E_PageCacheKeys.inputCode) || defaults.inputCode,\r\n      targetCode:\r\n        pageCache.get<string>(E_PageCacheKeys.targetCode) ||\r\n        defaults.targetCode,\r\n      favorites: getDefaultFavorites(\r\n        (pageCache.get(E_PageCacheKeys.favoriteCodes) as T_FavoriteCodes) ||\r\n          defaults.favoriteCodes\r\n      ),\r\n      pageCache\r\n    };\r\n  }, [location, defaults]);\r\n}\r\n\r\nexport function createReducer(props: T_UnitConverterConversionLogicProps) {\r\n  return (\r\n    state: T_UnitConverterState,\r\n    [type, payload]: T_UnitConverterAction\r\n  ) => {\r\n    if (!props.conversionRates && !props.conversionFormulas) {\r\n      return state;\r\n    }\r\n\r\n    const conversionLogicProps = {\r\n      conversionRates: props.conversionRates,\r\n      conversionFormulas: props.conversionFormulas\r\n    };\r\n\r\n    switch (type) {\r\n      case E_UnitConverterActions.setInputCode: {\r\n        return {\r\n          ...state,\r\n          inputCode: payload,\r\n          targetValue: calcValue({\r\n            ...conversionLogicProps,\r\n            inputCode: payload,\r\n            targetCode: state.targetCode,\r\n            inputValue: state.inputValue\r\n          }),\r\n          favorites: calcValueForFavorites({\r\n            ...conversionLogicProps,\r\n            favorites: state.favorites,\r\n            inputCode: payload,\r\n            inputValue: state.inputValue\r\n          })\r\n        };\r\n      }\r\n\r\n      case E_UnitConverterActions.setTargetCode: {\r\n        const newInputValue = calcValue({\r\n          ...conversionLogicProps,\r\n          inputCode: payload,\r\n          targetCode: state.inputCode,\r\n          inputValue: state.targetValue\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          targetCode: payload,\r\n          inputValue: newInputValue,\r\n          favorites: calcValueForFavorites({\r\n            ...conversionLogicProps,\r\n            favorites: state.favorites,\r\n            inputCode: state.inputCode,\r\n            inputValue: newInputValue\r\n          })\r\n        };\r\n      }\r\n\r\n      case E_UnitConverterActions.swapInputTargetCode: {\r\n        return {\r\n          ...state,\r\n          inputCode: state.targetCode,\r\n          targetCode: state.inputCode,\r\n          inputValue: state.targetValue,\r\n          targetValue: state.inputValue\r\n        };\r\n      }\r\n\r\n      case E_UnitConverterActions.setInputValue: {\r\n        const sanitizedInputValue = sanitizeNumericInput(payload);\r\n\r\n        // Avoid state update (and re-render) if there is no change\r\n        if (sanitizedInputValue === state.inputValue) {\r\n          return state;\r\n        }\r\n\r\n        return {\r\n          ...state,\r\n          inputValue: sanitizedInputValue,\r\n          targetValue: calcValue({\r\n            ...conversionLogicProps,\r\n            inputCode: state.inputCode,\r\n            targetCode: state.targetCode,\r\n            inputValue: sanitizedInputValue\r\n          }),\r\n          favorites: calcValueForFavorites({\r\n            ...conversionLogicProps,\r\n            favorites: state.favorites,\r\n            inputCode: state.inputCode,\r\n            inputValue: sanitizedInputValue\r\n          })\r\n        };\r\n      }\r\n\r\n      case E_UnitConverterActions.setTargetValue: {\r\n        const sanitizedTargetValue = sanitizeNumericInput(payload);\r\n\r\n        // Avoid state update (and re-render) if there is no change\r\n        if (sanitizedTargetValue === state.targetValue) {\r\n          return state;\r\n        }\r\n\r\n        const newInputValue = calcValue({\r\n          ...conversionLogicProps,\r\n          inputCode: state.targetCode,\r\n          targetCode: state.inputCode,\r\n          inputValue: sanitizedTargetValue\r\n        });\r\n\r\n        return {\r\n          ...state,\r\n          inputValue: newInputValue,\r\n          targetValue: sanitizedTargetValue,\r\n          favorites: calcValueForFavorites({\r\n            ...conversionLogicProps,\r\n            favorites: state.favorites,\r\n            inputCode: state.inputCode,\r\n            inputValue: newInputValue\r\n          })\r\n        };\r\n      }\r\n\r\n      case E_UnitConverterActions.toggleFavorite: {\r\n        const favoritesArrWithoutPayloadItem = state.favorites.filter(\r\n          (favItem) => favItem.code !== payload\r\n        );\r\n\r\n        // Check if the filtering resulted in a smaller array than state.favorites\r\n        if (favoritesArrWithoutPayloadItem.length < state.favorites.length) {\r\n          // This means that the supplied item already existed in state.favorites\r\n          // and we just obtained an array after removing it.\r\n          return {\r\n            ...state,\r\n            favorites: favoritesArrWithoutPayloadItem\r\n          };\r\n        }\r\n\r\n        // Otherwise it means that payload item is a new item to be favorited\r\n        return {\r\n          ...state,\r\n          favorites: [...state.favorites, payload]\r\n        };\r\n      }\r\n      default:\r\n        return state;\r\n    }\r\n  };\r\n}\r\n","var _g, _g2, _g3, _g4, _g5, _g6, _g7, _g8, _g9, _g10, _g11, _g12, _g13, _g14, _g15, _g16;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgDelete(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Capa_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 489.425 489.425\",\n    style: {\n      enableBackground: \"new 0 0 489.425 489.425\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M122.825,394.663c17.8,19.4,43.2,30.6,69.5,30.6h216.9c44.2,0,80.2-36,80.2-80.2v-200.7c0-44.2-36-80.2-80.2-80.2h-216.9 c-26.4,0-51.7,11.1-69.5,30.6l-111.8,121.7c-14.7,16.1-14.7,40.3,0,56.4L122.825,394.663z M29.125,233.063l111.8-121.8 c13.2-14.4,32-22.6,51.5-22.6h216.9c30.7,0,55.7,25,55.7,55.7v200.6c0,30.7-25,55.7-55.7,55.7h-217c-19.5,0-38.3-8.2-51.5-22.6 l-111.7-121.8C23.025,249.663,23.025,239.663,29.125,233.063z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M225.425,309.763c2.4,2.4,5.5,3.6,8.7,3.6s6.3-1.2,8.7-3.6l47.8-47.8l47.8,47.8c2.4,2.4,5.5,3.6,8.7,3.6s6.3-1.2,8.7-3.6 c4.8-4.8,4.8-12.5,0-17.3l-47.9-47.8l47.8-47.8c4.8-4.8,4.8-12.5,0-17.3s-12.5-4.8-17.3,0l-47.8,47.8l-47.8-47.8 c-4.8-4.8-12.5-4.8-17.3,0s-4.8,12.5,0,17.3l47.8,47.8l-47.8,47.8C220.725,297.263,220.725,304.962,225.425,309.763z\"\n  })))), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", null)), _g3 || (_g3 = /*#__PURE__*/React.createElement(\"g\", null)), _g4 || (_g4 = /*#__PURE__*/React.createElement(\"g\", null)), _g5 || (_g5 = /*#__PURE__*/React.createElement(\"g\", null)), _g6 || (_g6 = /*#__PURE__*/React.createElement(\"g\", null)), _g7 || (_g7 = /*#__PURE__*/React.createElement(\"g\", null)), _g8 || (_g8 = /*#__PURE__*/React.createElement(\"g\", null)), _g9 || (_g9 = /*#__PURE__*/React.createElement(\"g\", null)), _g10 || (_g10 = /*#__PURE__*/React.createElement(\"g\", null)), _g11 || (_g11 = /*#__PURE__*/React.createElement(\"g\", null)), _g12 || (_g12 = /*#__PURE__*/React.createElement(\"g\", null)), _g13 || (_g13 = /*#__PURE__*/React.createElement(\"g\", null)), _g14 || (_g14 = /*#__PURE__*/React.createElement(\"g\", null)), _g15 || (_g15 = /*#__PURE__*/React.createElement(\"g\", null)), _g16 || (_g16 = /*#__PURE__*/React.createElement(\"g\", null)));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.3556d1eb7ff0c2a1ea66073930c3c951.svg\";\nexport { ForwardRef as ReactComponent };","var _g, _g2, _g3, _g4, _g5, _g6, _g7, _g8, _g9, _g10, _g11, _g12, _g13, _g14, _g15;\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nfunction SvgSwap(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512.006 512.006\",\n    style: {\n      enableBackground: \"new 0 0 512.006 512.006\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#D83249\"\n    },\n    d: \"M23.151,149.616l115.072,115.072c7.901,7.901,20.713,7.901,28.614,0s7.901-20.713,0-28.614 l-44.568-44.568h316.313v-0.001c31.036,0,56.198-25.16,56.198-56.198c0-31.036-25.16-56.198-56.198-56.198H122.269l44.568-44.568 c3.951-3.951,5.927-9.129,5.927-14.308s-1.976-10.357-5.927-14.308c-7.901-7.901-20.713-7.901-28.614,0L23.151,121.002 C15.25,128.903,15.25,141.715,23.151,149.616z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#FF4F59\"\n    },\n    d: \"M23.151,149.616l115.072,115.072c7.901,7.901,20.713,7.901,28.614,0s7.901-20.713,0-28.614 l-44.568-44.568h139.247V79.111H122.269l44.568-44.568c3.951-3.951,5.927-9.129,5.927-14.308s-1.976-10.357-5.927-14.308 c-7.901-7.901-20.713-7.901-28.614,0L23.151,121.002C15.25,128.903,15.25,141.715,23.151,149.616z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#CFCDCF\"\n    },\n    d: \"M488.855,362.39L373.783,247.318c-7.901-7.901-20.713-7.901-28.614,0 c-7.901,7.901-7.901,20.713,0,28.614l44.567,44.568H73.423v0.001c-31.036,0-56.198,25.16-56.198,56.198 c0,31.036,25.16,56.198,56.198,56.198h316.314l-44.568,44.568c-3.951,3.951-5.927,9.129-5.927,14.308 c0,5.179,1.976,10.357,5.927,14.308c7.901,7.901,20.713,7.901,28.614,0l115.072-115.072 C496.757,383.103,496.757,370.291,488.855,362.39z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#B1B0BC\"\n    },\n    d: \"M488.855,362.39L373.783,247.318c-7.901-7.901-20.713-7.901-28.614,0 c-7.901,7.901-7.901,20.713,0,28.614l44.567,44.568H261.518v112.395h128.218l-44.568,44.568c-3.951,3.951-5.927,9.129-5.927,14.308 c0,5.179,1.976,10.357,5.927,14.308c7.901,7.901,20.713,7.901,28.614,0l115.072-115.072 C496.757,383.103,496.757,370.291,488.855,362.39z\"\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null)), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", null)), _g3 || (_g3 = /*#__PURE__*/React.createElement(\"g\", null)), _g4 || (_g4 = /*#__PURE__*/React.createElement(\"g\", null)), _g5 || (_g5 = /*#__PURE__*/React.createElement(\"g\", null)), _g6 || (_g6 = /*#__PURE__*/React.createElement(\"g\", null)), _g7 || (_g7 = /*#__PURE__*/React.createElement(\"g\", null)), _g8 || (_g8 = /*#__PURE__*/React.createElement(\"g\", null)), _g9 || (_g9 = /*#__PURE__*/React.createElement(\"g\", null)), _g10 || (_g10 = /*#__PURE__*/React.createElement(\"g\", null)), _g11 || (_g11 = /*#__PURE__*/React.createElement(\"g\", null)), _g12 || (_g12 = /*#__PURE__*/React.createElement(\"g\", null)), _g13 || (_g13 = /*#__PURE__*/React.createElement(\"g\", null)), _g14 || (_g14 = /*#__PURE__*/React.createElement(\"g\", null)), _g15 || (_g15 = /*#__PURE__*/React.createElement(\"g\", null)));\n}\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgSwap);\nexport default __webpack_public_path__ + \"static/media/swap.879a49335bf9b6183ffea43623e20dd4.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useReducer } from \"react\";\r\n\r\nimport deleteIcon from \"shared/images/delete.svg\";\r\nimport swapIcon from \"shared/images/swap.svg\";\r\nimport { createReducer, useDefaults, useElementHandlers } from \"./hooks\";\r\nimport \"./styles.scss\";\r\nimport {\r\n  E_UnitConverterListItemActions,\r\n  T_FavoriteItemWithValue,\r\n  T_UnitConverterProps,\r\n  T_UnitConverterState\r\n} from \"./types\";\r\n\r\nexport default function UnitConverter(props: T_UnitConverterProps) {\r\n  const defaults = useDefaults(props.defaults);\r\n  const memoizedReducer = useCallback(createReducer(props), [\r\n    props.conversionFormulas,\r\n    props.conversionRates\r\n  ]);\r\n  const [state, dispatch] = useReducer(memoizedReducer, {\r\n    inputCode: defaults.inputCode,\r\n    targetCode: defaults.targetCode,\r\n    inputValue: \"\",\r\n    targetValue: \"\",\r\n    favorites: defaults.favorites\r\n  });\r\n  const {\r\n    handleInputValueChange,\r\n    handleTargetValueChange,\r\n    handleListItemAction,\r\n    handleInputClearClick,\r\n    handleTargetClearClick,\r\n    handleInputTargetCodeSwapClick,\r\n    inputValueEl,\r\n    targetValueEl\r\n  } = useElementHandlers(dispatch, defaults.pageCache);\r\n\r\n  return (\r\n    <div className=\"MoneyEx\">\r\n      <div className=\"gridWrap\">\r\n        <div className=\"inputWrap\">\r\n          {[\r\n            /**\r\n             * Input unit\r\n             */\r\n            {\r\n              code: state.inputCode,\r\n              valueEl: inputValueEl,\r\n              value: state.inputValue ?? (state.targetValue === 0 ? 0 : \"\"),\r\n              placeholder: `${E_UnitConverterListItemActions.input}:`,\r\n              onClearClick: handleInputClearClick,\r\n              onValueChange: handleInputValueChange\r\n            },\r\n            /**\r\n             * Target unit\r\n             */\r\n            {\r\n              code: state.targetCode,\r\n              valueEl: targetValueEl,\r\n              value: state.targetValue ?? (state.inputValue === 0 ? 0 : \"\"),\r\n              placeholder: `${E_UnitConverterListItemActions.target}:`,\r\n              onClearClick: handleTargetClearClick,\r\n              onValueChange: handleTargetValueChange\r\n            }\r\n          ].map((inputField, index) => {\r\n            const unitMapInfo = props.allUnitsMap[inputField.code];\r\n            const hasIcon = props.UnitIconComponent || unitMapInfo.icon;\r\n\r\n            return (\r\n              <div key={inputField.code} className=\"inputItem\">\r\n                {props.UnitIconComponent && unitMapInfo.altCode ? (\r\n                  <props.UnitIconComponent\r\n                    code={unitMapInfo.altCode}\r\n                    wrapperClassName=\"inputUnitIconComponent\"\r\n                  />\r\n                ) : (\r\n                  unitMapInfo.icon\r\n                )}\r\n                <span className=\"inputItemCodeSymbol\">\r\n                  {hasIcon ? `${inputField.code} ` : \"\"}\r\n                  {unitMapInfo.symbol}\r\n                </span>\r\n                <input\r\n                  autoFocus={index === 0}\r\n                  ref={inputField.valueEl}\r\n                  maxLength={12}\r\n                  inputMode=\"numeric\"\r\n                  placeholder={`${inputField.placeholder} ${unitMapInfo.name}`}\r\n                  className=\"inputField\"\r\n                  type=\"text\"\r\n                  onChange={inputField.onValueChange}\r\n                  value={inputField.value}\r\n                />\r\n                <img\r\n                  src={deleteIcon}\r\n                  onClick={inputField.onClearClick}\r\n                  className={`clearInputIcon ${\r\n                    inputField.value !== \"\" ? \"visible\" : \"invisible\"\r\n                  }`}\r\n                  alt=\"close\"\r\n                />\r\n              </div>\r\n            );\r\n          })}\r\n          <span className=\"inputItemsSeparator\" />\r\n          <img\r\n            src={swapIcon}\r\n            className=\"swapIcon\"\r\n            alt=\"Swap Icon\"\r\n            onClick={() =>\r\n              handleInputTargetCodeSwapClick(state.inputCode, state.targetCode)\r\n            }\r\n          />\r\n          {/* <button className=\"swapIcon inputWrapItemsOrdering\">SWAP</button> */}\r\n        </div>\r\n        <div className=\"favList\">\r\n          {getUnitListMarkup({\r\n            favorites: state.favorites,\r\n            allUnitsMap: props.allUnitsMap,\r\n            handleListItemAction,\r\n            currentInputCode: state.inputCode,\r\n            currentTargetCode: state.targetCode,\r\n            UnitIconComponent: props.UnitIconComponent\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getUnitListMarkup({\r\n  handleListItemAction,\r\n  allUnitsMap,\r\n  favorites,\r\n  currentInputCode,\r\n  currentTargetCode,\r\n  UnitIconComponent\r\n}: {\r\n  handleListItemAction: (\r\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ) => void;\r\n  allUnitsMap: T_UnitConverterProps[\"allUnitsMap\"];\r\n  favorites?: T_UnitConverterState[\"favorites\"];\r\n  currentInputCode?: T_UnitConverterState[\"inputCode\"];\r\n  currentTargetCode?: T_UnitConverterState[\"targetCode\"];\r\n  UnitIconComponent?: T_UnitConverterProps[\"UnitIconComponent\"];\r\n}) {\r\n  const arrSource = favorites || Object.keys(allUnitsMap);\r\n\r\n  return (\r\n    <>\r\n      {arrSource.map((unit) => {\r\n        const code = favorites\r\n          ? (unit as T_FavoriteItemWithValue).code\r\n          : (unit as string);\r\n\r\n        // Do not render the currency item that is already the input/target\r\n        if (code === currentInputCode || code === currentTargetCode) {\r\n          return null;\r\n        }\r\n\r\n        const unitMapInfo = allUnitsMap[code];\r\n        const hasIcon = UnitIconComponent || unitMapInfo.icon;\r\n\r\n        return (\r\n          <div className=\"itemWrap\" key={code}>\r\n            <div className=\"itemInfoWrap\">\r\n              <div className=\"codeFlagGroup\">\r\n                {hasIcon ? (\r\n                  <>\r\n                    {UnitIconComponent && unitMapInfo.altCode ? (\r\n                      <UnitIconComponent\r\n                        code={unitMapInfo.altCode}\r\n                        wrapperClassName=\"-mt-1 pr-2\"\r\n                      />\r\n                    ) : (\r\n                      unitMapInfo.icon\r\n                    )}\r\n                    {code}\r\n                  </>\r\n                ) : (\r\n                  <span className=\"text-xl\">{unitMapInfo.symbol}</span>\r\n                )}\r\n              </div>\r\n              <div className=\"favItemRightGroup\">\r\n                {favorites && (\r\n                  <div className=\"favItemSymbolValueGroup\">\r\n                    {hasIcon && (\r\n                      <span className=\"favItemSymbol\">\r\n                        {unitMapInfo.symbol || \"\"}\r\n                      </span>\r\n                    )}\r\n                    <span className=\"exRate\">\r\n                      &nbsp;\r\n                      {(unit as T_FavoriteItemWithValue).value ?? 0}\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                <div className=\"name\">\r\n                  {(code && unitMapInfo?.name) || \"...\"}\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"favItemActionBtnGroup\">\r\n              {[\r\n                E_UnitConverterListItemActions.input,\r\n                E_UnitConverterListItemActions.target\r\n              ].map((btnName) => (\r\n                <button\r\n                  key={btnName}\r\n                  className=\"favItemActionBtn\"\r\n                  data-code={code}\r\n                  data-action-name={btnName}\r\n                  onClick={handleListItemAction}\r\n                >\r\n                  {btnName}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  T_ConversionFormulas,\r\n  T_UnitConversionAllUnitsMap\r\n} from \"shared/types/unitConverter\";\r\nimport { T_Object } from \"shared/types/generics\";\r\nimport { T_StringOrNumber } from \"shared/types/common\";\r\n\r\nexport const enum E_PageCacheKeys {\r\n  inputCode = \"inputCode\",\r\n  targetCode = \"targetCode\",\r\n  favoriteCodes = \"favoriteCodes\"\r\n}\r\n\r\nexport const enum E_UnitConverterListItemActions {\r\n  input = \"INPUT\",\r\n  target = \"TARGET\"\r\n}\r\n\r\nexport const enum E_UnitConverterActions {\r\n  setInputCode,\r\n  setTargetCode,\r\n  setInputValue,\r\n  setTargetValue,\r\n  swapInputTargetCode,\r\n  toggleFavorite\r\n}\r\n\r\nexport type T_ConverionRateAPIFn = (...args: any[]) => Promise<\r\n  | {\r\n      conversionRates: T_ConversionRates;\r\n    }\r\n  | undefined\r\n  | null\r\n>;\r\n\r\nexport type T_UnitConverterPropsDefaults = {\r\n  inputCode: string;\r\n  targetCode: string;\r\n  favoriteCodes: T_FavoriteCodes;\r\n};\r\n\r\nexport type T_UnitConverterConversionLogicProps = {\r\n  conversionRates?: T_ConversionRates;\r\n  conversionFormulas?: T_ConversionFormulas;\r\n};\r\n\r\nexport type T_UnitConverterProps = {\r\n  allUnitsMap: T_UnitConversionAllUnitsMap;\r\n  defaults: T_UnitConverterPropsDefaults;\r\n  UnitIconComponent?: React.ComponentType<{\r\n    code: string;\r\n    wrapperClassName?: string;\r\n    iconClassName?: string;\r\n  }>;\r\n} & T_UnitConverterConversionLogicProps;\r\n\r\nexport type T_FavoriteItemWithValue = {\r\n  code: string;\r\n  value: T_StringOrNumber;\r\n};\r\n\r\nexport type T_FavoriteCodes = string[];\r\n\r\nexport type T_FavoritesWithValue = T_FavoriteItemWithValue[];\r\n\r\nexport type T_ConversionRates = T_Object<number>;\r\n\r\nexport type T_UnitConverterAction = [\r\n  type: E_UnitConverterActions,\r\n  payload?: any\r\n];\r\n\r\nexport type T_UnitConverterState = {\r\n  inputCode: string;\r\n  targetCode: string;\r\n  favorites: T_FavoritesWithValue;\r\n  inputValue: string | number;\r\n  targetValue: string | number;\r\n};\r\n","export function toNumber(x: any) {\r\n  return +x;\r\n}\r\n\r\nexport function round(num: number | string, fractionDigits: number = 2) {\r\n  return toNumber(toNumber(num).toFixed(fractionDigits));\r\n}\r\n","import { LocalStorage } from \"shared/helpers/webStorage\";\r\n\r\nexport default class PageCache {\r\n  keyPrefix: string;\r\n  cachedKeys: string[] = [];\r\n\r\n  constructor(pathname: string) {\r\n    this.keyPrefix = pathname;\r\n  }\r\n\r\n  private getPageKey(key: string) {\r\n    return `${this.keyPrefix}-${key}`;\r\n  }\r\n\r\n  public set = (key: string, data: any = null): void => {\r\n    const pageKey = this.getPageKey(key);\r\n    LocalStorage.setItem(pageKey, JSON.stringify(data));\r\n    this.cachedKeys.push(key);\r\n  };\r\n\r\n  public get = <Result>(key: string): Result | null => {\r\n    const pageKey = this.getPageKey(key);\r\n    return JSON.parse(LocalStorage.getItem(pageKey) ?? \"null\");\r\n  };\r\n\r\n  public remove = (key: string): void => {\r\n    const pageKey = this.getPageKey(key);\r\n    LocalStorage.removeItem(pageKey);\r\n    this.cachedKeys = this.cachedKeys.filter((k) => k !== key);\r\n  };\r\n\r\n  public clearAll = () => {\r\n    this.cachedKeys.forEach((key) => this.remove(key));\r\n    this.cachedKeys = [];\r\n  };\r\n}\r\n","export function isStorageSupported(type: string): boolean {\r\n  try {\r\n    const storage = (window as { [key: string]: any })[type];\r\n    const testKey = \"__storage_test__\";\r\n\r\n    storage.setItem(testKey, \"1\");\r\n    storage.removeItem(testKey);\r\n\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n// Wrapper class for storage\r\nexport class MemoryStorage {\r\n  public storage: { [x: string]: string } = {};\r\n\r\n  public setItem = (key: string, data: string): void => {\r\n    const json = (data && data.toString()) || \"\";\r\n\r\n    this.storage[key] = json;\r\n  };\r\n\r\n  public getItem = (key: string): string | null => this.storage[key] || \"\";\r\n\r\n  public removeItem = (key: string): void => {\r\n    delete this.storage[key];\r\n  };\r\n\r\n  public clear = () => {\r\n    this.storage = new MemoryStorage().storage;\r\n  };\r\n}\r\n\r\nexport const LocalStorage = isStorageSupported(\"localStorage\")\r\n  ? window.localStorage\r\n  : new MemoryStorage();\r\n\r\nexport const SessionStorage = isStorageSupported(\"sessionStorage\")\r\n  ? window.sessionStorage\r\n  : new MemoryStorage();\r\n","// extracted by mini-css-extract-plugin\nexport default {};"],"names":["sanitizeNumericInput","value","replace","getDefaultFavorites","favoriteCodes","map","code","calcValueForFavorites","_ref","favorites","conversionRates","conversionFormulas","inputCode","inputValue","favItem","calcValue","targetCode","_ref2","_ref4","targetValue","baseUnitCode","fromBaseTo","toBaseFrom","calcValueBasedOnFormula","_ref3","x","toNumber","n1","n2","round","calcValueBasedOnRatio","useElementHandlers","dispatch","pageCache","inputValueEl","useRef","targetValueEl","eventHandlers","useMemo","handleInputValueChange","event","E_UnitConverterActions","setInputValue","target","handleTargetValueChange","setTargetValue","handleListItemAction","actionName","currentTarget","dataset","E_UnitConverterListItemActions","input","_inputValueEl$current","set","E_PageCacheKeys","setInputCode","current","focus","_targetValueEl$curren","setTargetCode","handleInputClearClick","_inputValueEl$current3","handleTargetClearClick","_targetValueEl$curren2","handleInputTargetCodeSwapClick","_inputValueEl$current2","swapInputTargetCode","useDefaults","defaults","location","useLocation","PageCache","pathname","get","createReducer","props","state","type","payload","conversionLogicProps","newInputValue","sanitizedInputValue","sanitizedTargetValue","toggleFavorite","favoritesArrWithoutPayloadItem","filter","length","UnitConverter","_state$inputValue","_state$targetValue","memoizedReducer","useCallback","useReducer","_jsx","className","children","_jsxs","valueEl","placeholder","onClearClick","onValueChange","inputField","index","unitMapInfo","allUnitsMap","hasIcon","UnitIconComponent","icon","altCode","wrapperClassName","symbol","autoFocus","ref","maxLength","inputMode","name","onChange","src","deleteIcon","onClick","alt","swapIcon","getUnitListMarkup","currentInputCode","currentTargetCode","arrSource","Object","keys","_Fragment","unit","_value","btnName","num","fractionDigits","arguments","undefined","toFixed","constructor","_this","keyPrefix","cachedKeys","key","data","pageKey","getPageKey","LocalStorage","setItem","JSON","stringify","push","_LocalStorage$getItem","this","parse","getItem","remove","removeItem","k","clearAll","forEach","isStorageSupported","storage","window","testKey","error","MemoryStorage","json","toString","clear","localStorage","SessionStorage","sessionStorage"],"sourceRoot":""}