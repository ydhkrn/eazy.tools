"use strict";(self.webpackChunkeazy_tools_dev=self.webpackChunkeazy_tools_dev||[]).push([[4067,6406,9210],{26406:(o,t,n)=>{n.r(t),n.d(t,{getCompensatoryTranslationForZoom:()=>i,getElementRectMidPoint:()=>s,getElementTitleFromPoint:()=>c,getPointFromEvent:()=>r,getWidthRatio:()=>a});var e=n(1192);function i(o,t){return{x:-o.x*(t-1)/t,y:-o.y*(t-1)/t}}function r(o){const t={x:0,y:0};return(0,e.isTouchEvent)(o)?(t.x=o.targetTouches[0].clientX,t.y=o.targetTouches[0].clientY):(t.x=o.clientX,t.y=o.clientY),t}function s(o){if(o.current)return{x:o.current.getBoundingClientRect().width/2,y:o.current.getBoundingClientRect().height/2}}function a(o,t){if(t.current)return o.width/t.current.getBoundingClientRect().width}function c(o){const t=document.elementFromPoint(o.x,o.y);if(t){var n;const o=t.dataset||t;return null!==(n=o.title)&&void 0!==n?n:o.id}return""}},84067:(o,t,n)=>{n.r(t),n.d(t,{useMapControls:()=>p});var e=n(21945),i=n(26406),r=n(65043),s=n(49210);const a={x:0,y:0},c={...a,width:1010,height:655},l=null,u=1,m=1;function p(){const o=(0,r.useRef)(null),[t,n]=(0,r.useReducer)(w,{pointedAt:l,initialViewBox:c,viewBox:c,isPointerDown:!1,widthRatio:m,pointerOrigin:a,zoomCompensatoryTranslate:a,zoomFactor:u}),p=function(o){const t=t=>{const n=(0,i.getPointFromEvent)(t);o([s.E_MapControlActions.pointerDown,n])},n=()=>{o([s.E_MapControlActions.pointerUp])},e=t=>{t.preventDefault();const n=(0,i.getPointFromEvent)(t),e=(0,i.getElementTitleFromPoint)(n);o([s.E_MapControlActions.pointerMove,{elementTitle:e,position:n}])};return window.PointerEvent?{onPointerDown:t,onPointerUp:n,onPointerLeave:n,onPointerMove:e}:{onMouseDown:t,onMouseUp:n,onMouseLeave:n,onMouseMove:e,onTouchStart:t,onTouchEnd:n,onTouchMove:e}}(n),d=function(o){return{zoomIn:()=>o([s.E_MapControlActions.zoomIn]),zoomOut:()=>o([s.E_MapControlActions.zoomOut]),zoomReset:()=>o([s.E_MapControlActions.zoomReset])}}(n);return function(o,t){(0,r.useEffect)((()=>{const n=()=>{const n={},r=(0,i.getElementRectMidPoint)(t),a=(0,i.getWidthRatio)(c,t);(0,e.isNullOrVoid)(a)||(n.widthRatio=a),r&&(n.midPoint=r),Object.keys(n).length>0&&o([s.E_MapControlActions.setGeometricInitials,n])};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}),[t,o])}(n,o),{...t,svgRef:o,panEventHandlers:p,zoomEventHandlers:d}}const d=.5;function w(o,t){let[n,e]=t;switch(n){case s.E_MapControlActions.setGeometricInitials:return{...o,...e};case s.E_MapControlActions.pointerDown:return{...o,isPointerDown:!0,pointerOrigin:e};case s.E_MapControlActions.pointerMove:{const t=!!e.elementTitle,n=t?e:l;return o.isPointerDown?{...o,pointedAt:l,viewBox:{...o.viewBox,x:o.initialViewBox.x-(e.position.x-o.pointerOrigin.x)*o.widthRatio,y:o.initialViewBox.y-(e.position.y-o.pointerOrigin.y)*o.widthRatio}}:t||o.pointedAt!==l?{...o,pointedAt:n}:o}case s.E_MapControlActions.pointerUp:return{...o,isPointerDown:!1,initialViewBox:{...o.initialViewBox,x:o.viewBox.x,y:o.viewBox.y}};case s.E_MapControlActions.zoomIn:{var r;const t=o.zoomFactor+d;let n;return o.midPoint&&(n=(0,i.getCompensatoryTranslationForZoom)(o.midPoint,t)),{...o,zoomFactor:t,zoomCompensatoryTranslate:null!==(r=n)&&void 0!==r?r:o.zoomCompensatoryTranslate}}case s.E_MapControlActions.zoomOut:{const t=o.zoomFactor-d;let n;var m;return o.midPoint&&(n=(0,i.getCompensatoryTranslationForZoom)(o.midPoint,t)),t>1||o.zoomFactor!==u?{...o,zoomFactor:t<u?u:t,zoomCompensatoryTranslate:null!==(m=n)&&void 0!==m?m:o.zoomCompensatoryTranslate}:o}case s.E_MapControlActions.zoomReset:return{...o,zoomFactor:u,zoomCompensatoryTranslate:a,viewBox:c,initialViewBox:c};default:return o}}},49210:(o,t,n)=>{let e;n.r(t),n.d(t,{E_MapControlActions:()=>e}),function(o){o[o.setGeometricInitials=0]="setGeometricInitials",o[o.pointerDown=1]="pointerDown",o[o.pointerUp=2]="pointerUp",o[o.pointerMove=3]="pointerMove",o[o.zoomIn=4]="zoomIn",o[o.zoomOut=5]="zoomOut",o[o.zoomReset=6]="zoomReset"}(e||(e={}))}}]);
//# sourceMappingURL=4067.a898aa38.chunk.js.map