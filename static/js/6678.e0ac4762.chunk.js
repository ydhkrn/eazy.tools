"use strict";(self.webpackChunkeazy_tools_dev=self.webpackChunkeazy_tools_dev||[]).push([[6678,4495,2199,1459,5075,3745],{84495:(e,t,o)=>{o.r(t),o.d(t,{calcValue:()=>i,calcValueForFavorites:()=>u,getDefaultFavorites:()=>n,sanitizeNumericInput:()=>a});var r=o(51459);function a(e){return e.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1").replace(/^(\.)$/,"0.").replace(/^0(\d)/,"$1")}function n(e){return e.map((e=>({code:e,value:""})))}function u(e){let{favorites:t,conversionRates:o,conversionFormulas:r,inputCode:a,inputValue:n}=e;return t.map((e=>({...e,value:i({conversionRates:o,conversionFormulas:r,inputCode:a,targetCode:e.code,inputValue:n})})))}function i(e){let{conversionRates:t,conversionFormulas:o,inputCode:a,targetCode:n,inputValue:u}=e;return o?function(e){let{conversionFormulas:t,inputCode:o,targetCode:r,inputValue:a}=e,n=0;if(o===t.baseUnitCode)return t.fromBaseTo[r](a);return n=t.toBaseFrom[o](a),r===t.baseUnitCode?n:t.fromBaseTo[r](n)}({conversionFormulas:o,inputCode:a,targetCode:n,inputValue:u}):t?function(e){let{conversionRates:t,inputCode:o,targetCode:a,inputValue:n}=e;const u=(0,r.toNumber)(n),i=t[o],s=t[a];return(0,r.round)(s*u/i)}({conversionRates:t,inputCode:a,targetCode:n,inputValue:u}):u}},6678:(e,t,o)=>{o.r(t),o.d(t,{createReducer:()=>l,useDefaults:()=>c,useElementHandlers:()=>s});var r=o(65043),a=o(86971),n=o(25075),u=o(84495),i=o(72199);function s(e,t){const o=(0,r.useRef)(null),a=(0,r.useRef)(null),n=(0,r.useMemo)((()=>({handleInputValueChange:t=>e([i.E_UnitConverterActions.setInputValue,t.target.value]),handleTargetValueChange:t=>e([i.E_UnitConverterActions.setTargetValue,t.target.value]),handleListItemAction:r=>{const{code:n,actionName:u}=r.currentTarget.dataset;if(n&&u)switch(u){case i.E_UnitConverterListItemActions.input:var s;return t.set(i.E_PageCacheKeys.inputCode,n),e([i.E_UnitConverterActions.setInputCode,n]),void(null===(s=o.current)||void 0===s||s.focus());case i.E_UnitConverterListItemActions.target:var c;return t.set(i.E_PageCacheKeys.targetCode,n),e([i.E_UnitConverterActions.setTargetCode,n]),void(null===(c=a.current)||void 0===c||c.focus());default:return}},handleInputClearClick:()=>{var t;e([i.E_UnitConverterActions.setInputValue,""]),null===(t=o.current)||void 0===t||t.focus()},handleTargetClearClick:()=>{var t;e([i.E_UnitConverterActions.setTargetValue,""]),null===(t=a.current)||void 0===t||t.focus()},handleInputTargetCodeSwapClick:(r,a)=>{var n;t.set(i.E_PageCacheKeys.inputCode,a),t.set(i.E_PageCacheKeys.targetCode,r),e([i.E_UnitConverterActions.swapInputTargetCode]),null===(n=o.current)||void 0===n||n.focus()}})),[e,t]);return{inputValueEl:o,targetValueEl:a,...n}}function c(e){const t=(0,a.zy)();return(0,r.useMemo)((()=>{const o=new n.default(t.pathname);return{inputCode:o.get(i.E_PageCacheKeys.inputCode)||e.inputCode,targetCode:o.get(i.E_PageCacheKeys.targetCode)||e.targetCode,favorites:(0,u.getDefaultFavorites)(o.get(i.E_PageCacheKeys.favoriteCodes)||e.favoriteCodes),pageCache:o}}),[t,e])}function l(e){return(t,o)=>{let[r,a]=o;if(!e.conversionRates&&!e.conversionFormulas)return t;const n={conversionRates:e.conversionRates,conversionFormulas:e.conversionFormulas};switch(r){case i.E_UnitConverterActions.setInputCode:return{...t,inputCode:a,targetValue:(0,u.calcValue)({...n,inputCode:a,targetCode:t.targetCode,inputValue:t.inputValue}),favorites:(0,u.calcValueForFavorites)({...n,favorites:t.favorites,inputCode:a,inputValue:t.inputValue})};case i.E_UnitConverterActions.setTargetCode:{const e=(0,u.calcValue)({...n,inputCode:a,targetCode:t.inputCode,inputValue:t.targetValue});return{...t,targetCode:a,inputValue:e,favorites:(0,u.calcValueForFavorites)({...n,favorites:t.favorites,inputCode:t.inputCode,inputValue:e})}}case i.E_UnitConverterActions.swapInputTargetCode:return{...t,inputCode:t.targetCode,targetCode:t.inputCode,inputValue:t.targetValue,targetValue:t.inputValue};case i.E_UnitConverterActions.setInputValue:{const e=(0,u.sanitizeNumericInput)(a);return e===t.inputValue?t:{...t,inputValue:e,targetValue:(0,u.calcValue)({...n,inputCode:t.inputCode,targetCode:t.targetCode,inputValue:e}),favorites:(0,u.calcValueForFavorites)({...n,favorites:t.favorites,inputCode:t.inputCode,inputValue:e})}}case i.E_UnitConverterActions.setTargetValue:{const e=(0,u.sanitizeNumericInput)(a);if(e===t.targetValue)return t;const o=(0,u.calcValue)({...n,inputCode:t.targetCode,targetCode:t.inputCode,inputValue:e});return{...t,inputValue:o,targetValue:e,favorites:(0,u.calcValueForFavorites)({...n,favorites:t.favorites,inputCode:t.inputCode,inputValue:o})}}case i.E_UnitConverterActions.toggleFavorite:{const e=t.favorites.filter((e=>e.code!==a));return e.length<t.favorites.length?{...t,favorites:e}:{...t,favorites:[...t.favorites,a]}}default:return t}}}},72199:(e,t,o)=>{let r,a,n;o.r(t),o.d(t,{E_PageCacheKeys:()=>r,E_UnitConverterActions:()=>n,E_UnitConverterListItemActions:()=>a}),function(e){e.inputCode="inputCode",e.targetCode="targetCode",e.favoriteCodes="favoriteCodes"}(r||(r={})),function(e){e.input="INPUT",e.target="TARGET"}(a||(a={})),function(e){e[e.setInputCode=0]="setInputCode",e[e.setTargetCode=1]="setTargetCode",e[e.setInputValue=2]="setInputValue",e[e.setTargetValue=3]="setTargetValue",e[e.swapInputTargetCode=4]="swapInputTargetCode",e[e.toggleFavorite=5]="toggleFavorite"}(n||(n={}))},51459:(e,t,o)=>{function r(e){return+e}function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return r(r(e).toFixed(t))}o.r(t),o.d(t,{round:()=>a,toNumber:()=>r})},25075:(e,t,o)=>{o.r(t),o.d(t,{default:()=>a});var r=o(83745);class a{constructor(e){var t=this;this.keyPrefix=void 0,this.cachedKeys=[],this.set=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=t.getPageKey(e);r.LocalStorage.setItem(a,JSON.stringify(o)),t.cachedKeys.push(e)},this.get=e=>{var t;const o=this.getPageKey(e);return JSON.parse(null!==(t=r.LocalStorage.getItem(o))&&void 0!==t?t:"null")},this.remove=e=>{const t=this.getPageKey(e);r.LocalStorage.removeItem(t),this.cachedKeys=this.cachedKeys.filter((t=>t!==e))},this.clearAll=()=>{this.cachedKeys.forEach((e=>this.remove(e))),this.cachedKeys=[]},this.keyPrefix=e}getPageKey(e){return`${this.keyPrefix}-${e}`}}},83745:(e,t,o)=>{function r(e){try{const t=window[e],o="__storage_test__";return t.setItem(o,"1"),t.removeItem(o),!0}catch(t){return!1}}o.r(t),o.d(t,{LocalStorage:()=>n,MemoryStorage:()=>a,SessionStorage:()=>u,isStorageSupported:()=>r});class a{constructor(){this.storage={},this.setItem=(e,t)=>{const o=t&&t.toString()||"";this.storage[e]=o},this.getItem=e=>this.storage[e]||"",this.removeItem=e=>{delete this.storage[e]},this.clear=()=>{this.storage=(new a).storage}}}const n=r("localStorage")?window.localStorage:new a,u=r("sessionStorage")?window.sessionStorage:new a}}]);
//# sourceMappingURL=6678.e0ac4762.chunk.js.map